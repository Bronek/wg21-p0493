# Atomic maximum/minimum

Paper P0493 for [WG21](http://www.open-std.org/jtc1/sc22/wg21)

Authors: Al Grant (al.grant@arm.com), Bronek Kozicki (brok@spamcop.net), Tim Northover (tnorthover@apple.com)

Audience: SG1, LEWG

## Branches

Refer to this branch [rev3](https://github.com/Bronek/wg21-p0493/tree/rev3) for P0493**R3** (revision 3), including example implementation and benchmarks.

Branch [main](https://github.com/Bronek/wg21-p0493/tree/main) may contain unpublished changes, including incompatible changes in the benchmark code.

**Benchmark results may not be compared between branches**

## Directory structure

* `bench1` populates fixed size queue with empty data; results from this benchmark were _dropped_, due to exceedingly high standard deviation (as explained in the proposal)
* `bench2` finds maximum value from a series generated by a PRNG
* `P0493R3.md` actual editable proposal text
* `P0493R3.pdf` generated with https://github.com/mpark/wg21 (thanks [Michael Park](https://mpark.github.io/programming/2018/11/16/how-i-format-my-cpp-papers/) !)
* `fetch_max.hpp` different implementations of `atomic_fetch_max_explicit`, as measured in benchmarks
* `stats.hpp` simple statistic calculator for mean and standard deviation

Note, the _default architecture_ for benchmarks is **not** Intel x86_64, as to our knowledge this architecture does not implement atomic `fetch_max` in hardware; instead it is ARMv8.1 ; to build the benchmarks on Intel you will need to set `MARCH` env. variable, e.g.

```bash
cd bench2; MARCH=core2 make
```
